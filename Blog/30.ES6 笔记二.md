# ES6 ç¬”è®°äºŒ
[ES6 ç¬”è®°ä¸€](https://github.com/ccforward/cc/issues/30)

[æ€ç»´å¯¼å›¾](http://naotu.baidu.com/file/e12e2639ddc6580a75f9942556d35ffb)

## 1. å‡½æ•°
### 1.1 å‡½æ•°å‚æ•°é»˜è®¤å€¼

* åŸºæœ¬ç”¨æ³•

	```js
	function log(x, y='Worlds'){
		console.log(x,y)
	}
	log('Hello'); // Hello, World
	
	function Poin(x=0,y=0){
		this.x = x;
		this.y = y;
	}
	
	var p = new Point();
	p // {x:0, y:0}
	```

	å‚æ•°å˜é‡æ˜¯é»˜è®¤å£°æ˜çš„ï¼Œä¸èƒ½ç”¨ `let` `const` å†æ¬¡å£°æ˜

	```js
	function foo(x = 1){
		let x = 2; // error
		const x = 3; // error
	}
	```

* ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨
	
	```js
	function fetch(url, {method='GET'}={}){
		console.log(method)
	}
	fetch('/index.html') // 'GET'
	
	function m({x=0,y=0}={}){
		console.log([x,y])
	}
	
	m() // [0,0]
	m({x:1, y:2}) // [1,2]
	m({x:3}) // [3,0]
	m({}) // [0,0]
	m({xx:1}) // [0,0]
	```

* å‚æ•°é»˜è®¤å€¼ä½ç½®

	é€šå¸¸æŠŠå‡½æ•°çš„å°¾å‚æ•°ä½œä¸ºæœ‰é»˜è®¤å€¼çš„å‚æ•°ã€‚å› ä¸ºè¿™æ ·æ¯”è¾ƒå®¹æ˜“çœ‹å‡ºåˆ°åº•å¿½ç•¥é‚£äº›å‚æ•°ã€‚
	
	```js
	function f(x,y=1,z){
		console.log([x,y,z])
	}
	
	f() // [undefined, 1, undefined]
	f(1) // [1, 1, undefined]
	f(1,,2) // å‡ºé”™
	f(1,undefined,3) // [1, 1, 3]
	```
	ä¸Šé¢çš„å‡½æ•°ï¼Œæœ‰é»˜è®¤å€¼çš„å‚æ•°ä¸æ˜¯å°¾å‚æ•°ï¼Œå› æ­¤æ— æ³•çœç•¥è¯¥å‚æ•°è€Œä¸çœç•¥å…¶åçš„å‚æ•°ï¼Œé™¤éæ˜¾å¼çš„è¾“å…¥ undefined

* å‡½æ•°`length`å±æ€§

	æŒ‡å®šäº†é»˜è®¤å€¼åå‡½æ•°çš„ `length` å±æ€§å°†è¿”å›æ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„å‚æ•°ä¸ªæ•°
	
	```js
	(function(a){}).length // 1
	(function(a,b,c=1){}).length //2
	```
	PS: restå‚æ•°ä¸ä¼šè®¡å…¥ length å±æ€§
	
* ä½œç”¨åŸŸ
	
	å¦‚æœå‚æ•°é»˜è®¤å€¼æ˜¯ä¸€ä¸ªå˜é‡ï¼Œåˆ™è¯¥å˜é‡æ‰€å¤„çš„ä½œç”¨åŸŸä¸å…¶å®ƒå˜é‡çš„ä½œç”¨åŸŸè§„åˆ™æ˜¯ä¸€æ ·çš„ï¼Œå³å…ˆæ˜¯å½“å‰å‡½æ•°çš„ä½œç”¨åŸŸï¼Œç„¶åæ‰æ˜¯å…¨å±€ä½œç”¨åŸŸã€‚
	
	```js
	var x = 1;
	function f(x, y=x){
		console.log(y)
	}
	f(2)  // 2
	```
	ç”±äºå‡½æ•°ä½œç”¨åŸŸå†…éƒ¨çš„å˜é‡ x å·²ç»ç”Ÿæˆæ‰€ä»¥ y ç­‰äºå‚æ•° x è€Œä¸æ˜¯å…¨å±€å˜é‡xã€‚
	
	```js
	let x = 1;
	function f(y=x){
		let x= 2;
		console.log(y)
	}
	f() // 1
	```
	ä¸Šè¿°ä»£ç å‡½æ•°è°ƒç”¨æ—¶ y çš„é»˜è®¤å€¼å˜é‡ x å°šæœªåœ¨å‡½æ•°å†…éƒ¨ç”Ÿæˆï¼Œæ‰€ä»¥ x æŒ‡å‘å…¨å±€å˜é‡ã€‚
	
	**å¦‚æœå‡½æ•°Açš„é»˜è®¤å€¼æ˜¯å‡½æ•°B**  
	é‚£ä¹ˆç”±äºå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯å…¶ç”Ÿå‘½æ—¶çš„ä½œç”¨åŸŸï¼Œå‡½æ•°Bçš„ä½œç”¨åŸŸå°±ä¸æ˜¯å‡½æ•°Aï¼Œè€Œæ˜¯å…¨å±€ä½œç”¨åŸŸã€‚å¦‚ä¸‹ï¼š
	
	```js
	let foo = 'outer';
	
	function bar(func = x => foo){
		let foo = 'inner';
		console.log(func());
	}
	bar(); // outer
	
	```
	
	ä¸Šè¿°ä»£ç ç­‰åŒäº
	
	```js
	let foo = 'outer';
	let f = x => foo;
	
	function bar(func = f) {
	  let foo = 'inner';
	  console.log(func()); 
	}
	bar(); // outer
	```

* åº”ç”¨

	å¯æŒ‡å®šå‡½æ•°æŸä¸€ä¸ªå‚æ•°ä¸å¾—çœç•¥ï¼Œçœç•¥å°±ä¼šæŠ›å‡ºé”™è¯¯
	
	```js
	function throwIfMissing() {
	  throw new Error('Missing parameter');
	}
	
	function foo(mustBeProvided = throwIfMissing()) {
	  return mustBeProvided;
	}
	
	foo()
	// Error: Missing parameter
	```
	ä¸Šè¿°ä»£ç å¯çŸ¥å‚æ•° `mustBeProvided` çš„é»˜è®¤å€¼ç­‰äº `throwIfMissing` å‡½æ•°çš„è¿è¡Œç»“æœã€‚è¿™è¯´æ˜å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼ä¸æ˜¯åœ¨å®šä¹‰æ—¶æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶æ‰§è¡Œã€‚
	
	å¦‚æœæŠŠå‡½æ•°å‚æ•°é»˜è®¤å€¼è®¾ç½®ä¸º `undefined` åˆ™è¡¨ç¤ºè¿™ä¸ªå‚æ•°æ˜¯å¯ä»¥çœç•¥çš„ã€‚

### 1.2 rest å‚æ•°

restå‚æ•°("...å˜é‡å"),ç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ã€‚restå‚æ•°æ­é…çš„å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥å˜é‡å°†å¤šä½™çš„å‚æ•°æ”¾å…¥å…¶ä¸­ã€‚

```js
function push(array, ...items){
	items.forEach(item => {
		array.push(item);
	})
}
var a = [];
push(a,1,2,3)
```
rest å‚æ•°åªèƒ½ä½œä¸ºæœ€åä¸€å‚æ•°ã€‚

å‡½æ•°çš„ `length` å±æ€§ä¸åŒ…æ‹¬ rest å‚æ•°ã€‚

```js
(function(...a){}).length // 0
(function(a, ...b){}).length // 1
```

### 1.3 æ‰©å±•è¿ç®—ç¬¦

* å«ä¹‰

	æ‰©å±•è¿ç®—ç¬¦(spread)æ˜¯ä¸‰ä¸ªç‚¹(...)ã€‚å®ƒå¥½æ¯”restå‚æ•°çš„é€†è¿ç®—ï¼Œå°†ä¸€ä¸ªæ•°ç»„è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚
	
	```js
	console.log(...[1,2,3])
	// 1 2 3
	
	console.log(1, ...[2,3,4], 5)
	// 1 2 3 4 5
	```
	è¯¥è¿ç®—ç¬¦ä¸»è¦ç”¨äºå‡½æ•°çš„è°ƒç”¨
	
	```js
	function add(x,y){
		console.log(x+y);
	}
	var arr = [1,10];
	add(...arr); // 11  ...è¿ç®—ç¬¦æŠŠarræ•°ç»„å˜ä¸ºå‚æ•°åºåˆ—
	```
	
* æ›¿ä»£æ•°ç»„çš„ apply æ–¹æ³•

	ç”±äºæ‰©å±•è¿ç®—ç¬¦å¯ä»¥å±•å¼€æ•°ç»„ï¼Œæ‰€ä»¥ä¸éœ€è¦applyå°†æ•°ç»„è½¬ä¸ºå‡½æ•°çš„å‚æ•°äº†ã€‚
	
	```js
	// ES5
	function f(x,y,z){}
	var args = [1,2,3];
	f.apply(null, args)
	```
	
	```js
	// ES6
	function f(x,y,z){}
	var args = [1,2,3];
	f(...args)
	```
	
	* ä½¿ç”¨ `Math.max` æ±‚æ•°ç»„æœ€å¤§å…ƒç´ 
	
		```js
		// ES5
		Math.max.apply(null, [1,2,3,4])
		```
		
		```js
		// ES6
		Math.max(null, ...[1,2,3,4])
		```
	
	* é€šè¿‡ push å°†ä¸€ä¸ªæ•°ç»„æ·»åŠ åˆ°å¦ä¸€æ•°ç»„å°¾éƒ¨
		
		```js
		// ES5
		var arr1 = [0,1,2];
		var arr2 = [3,4,5];
		Array.prototype.push.apply(arr1,arr2)
		```

		```js
		// ES6
		var arr1 = [0,1,2];
		var arr2 = [3,4,5];
		arr1.push(...arr2)
		```
	
* æ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨
	1. åˆå¹¶æ•°ç»„
		
		```js
		//ES5
		[1,2].concat(more);
		arr1.concat(arr2,arr3)
		
		//ES6
		[1,2, ...more]
		[...arr1, ...arr2, ...arr3)
		```	
	* ä¸è§£æ„èµ‹å€¼ç»“åˆç”Ÿæˆæ•°ç»„

		```js
		// ES5
		a = list[0], rest = list.slice(1)
		// ES6
		[a, ...rest] = list
		
		const [first, ...rest] = [1, 2, 3, 4, 5];
		first // 1
		rest  // [2, 3, 4, 5]
		
		const [first, ...rest] = [];
		first // undefined
		rest  // []:
		
		const [first, ...rest] = ["foo"];
		first  // "foo"
		rest   // []
		```
		å¦‚æœå°†æ‰©å±•è¿ç®—ç¬¦ç”¨äºæ•°ç»„èµ‹å€¼ï¼Œ**åªèƒ½æ”¾åœ¨å‚æ•°çš„æœ€åä¸€ä½**
	* å­—ç¬¦ä¸²
		å°†å­—ç¬¦ä¸²è½¬ä¸ºçœŸæ­£çš„æ•°ç»„
		
		```js
		[...'hello']
		// [ "h", "e", "l", "l", "o" ]
		```
		è¿˜æœ‰ä¸€ä¸ªå¥½å¤„æ˜¯ **èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«32ä½çš„Unicodeå­—ç¬¦**
		
		å…¶ä¸­Unicodeå­—ç¬¦å¦‚: `'x\uD83D\uDE80y'` ä¹Ÿå°±æ˜¯ `"xğŸš€y"`
		
		```js
		'x\uD83D\uDE80y'.length // 4
		[...'x\uD83D\uDE80y'].length // 3
		```
		JavaScriptä¼šå°†32ä½Unicodeå­—ç¬¦ï¼Œè¯†åˆ«ä¸º2ä¸ªå­—ç¬¦ï¼Œé‡‡ç”¨æ‰©å±•è¿ç®—ç¬¦å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤å¯ä»¥è¿™æ ·æ¥å†™ï¼š
		
		```js
		function length(str) {
		  return [...str].length;
		}
		
		length('x\uD83D\uDE80y') // 3
		```
		å‡¡æ˜¯æ¶‰åŠåˆ°æ“ä½œ32ä½Unicodeå­—ç¬¦çš„å‡½æ•°ï¼Œéƒ½æœ‰è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼Œæœ€å¥½éƒ½ç”¨æ‰©å±•è¿ç®—ç¬¦æ”¹å†™ã€‚
		
		``` js
		let str = 'x\uD83D\uDE80y';

		str.split('').reverse().join('')
		// 'y\uDE80\uD83Dx'
		
		[...str].reverse().join('')
		// 'y\uD83D\uDE80x'
		```
		
		
	* ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡
	
		ä»»ä½•ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡éƒ½å¯ä»¥ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºçœŸæ­£çš„æ•°ç»„
		
		```js
		[...document.quertSelectorAll('div')];
		// [<div>, <div>, <div>]
		```
	* Mapå’ŒSetç»“æ„ï¼ŒGeneratorå‡½æ•°

		æ‰©å±•è¿ç®—ç¬¦å†…éƒ¨è°ƒç”¨çš„æ˜¯æ•°æ®ç»“æ„çš„Iteratoræ¥å£ï¼Œå› æ­¤åªè¦å…·æœ‰Iteratoræ¥å£çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ã€‚
		
		```js
		let map = new Map([
			  [1, 'one'],
			  [2, 'two'],
			  [3, 'three'],
			]);
			
		let arr = [...map.keys()]; // [1, 2, 3]
		```
		Generatorå‡½æ•°è¿è¡Œåï¼Œè¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå› æ­¤ä¹Ÿå¯ä»¥ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦ã€‚